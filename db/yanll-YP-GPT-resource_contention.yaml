app: YP-GPT
repo: https://github.com/yanll/dbgpts
commit: ''
defect_id: yanll-YP-GPT-resource_contention-/
type: resource contention
case: /
consequence:
- ST
locations:
- YP-GPT/dbgpt/client/client.py
- The developer suggests the user to add client.aclose() in test code.
trigger_tests:
- '1.Install and configure app using Docker.

  2.Test the chat data mode using Python SDK. The test code is as follows：


  import asyncio

  from dbgpt.client import Client

  async def main():

  # initialize client

  DBGPT_API_KEY = ""

  client = Client(api_key=DBGPT_API_KEY)

  #async for data in client.chat_stream(

  # model="tongyi_proxyllm",

  # messages="hello",

  #):

  # print(data)

  res = await client.chat(model="tongyi_proxyllm" ,messages="hello")

  print(res)

  if name == "main":

  asyncio.run(main())'
